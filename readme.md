<div align="center">

![Version](https://img.shields.io/badge/version-2024.03.21-blue.svg)
![License](https://img.shields.io/badge/license-MIT-green.svg)
![After Effects](https://img.shields.io/badge/After%20Effects-CS6%2B-9999FF)

</div>

## 📦 项目信息

- **项目名称**：Advanced-Null-Controller
- **仓库地址**：https://github.com/Tyc-github/Advanced-Null-Controller
- **问题反馈**：[Issues](https://github.com/Tyc-github/Advanced-Null-Controller/issues)

## 🔄 工作流程

脚本工作流程如下：

1. 启动脚本
2. 创建UI界面
3. 用户交互（分为三个主要分支）
   - 标题栏点击(Ctrl+Click) → 检查更新
   - 帮助按钮点击 → 显示帮助面板
   - 主功能按钮点击 → 功能模式选择
4. 功能模式（分为两个主要分支）
   - 创建模式 → 选择图层校验 → 执行成功/错误提示
   - 清除模式 → 执行清除操作


## ✨ 功能特点

### 🛠 主要功能

- **智能空对象创建**：自动在所选图层的中心位置创建空对象控制器
- **灵活的属性控制**：可选择性添加旋转、缩放、不透明度的表达式控制
- **多层级控制系统**：支持基础控制器、子控制器和总控制器的灵活组合
- **表达式模式**：可以仅添加表达式而不创建空对象，适用于已有控制器的场景
- **一键清除功能**：快速清除选中图层的表达式和父子级关系

### 🌟 高级功能

- **总控制器**

  - 更大尺寸的控制器，位于层级最顶层
  - 统一控制所有子级的变换
  - 适合整体动画控制
- **子控制器**

  - 中等尺寸的控制器，位于基础控制器之上
  - 可以单独控制一组图层的变换
  - 保持子级不随父级旋转或缩放
- **智能层级管理**

  - 自动设置合理的父子级关系
  - 保持原有父子级链接
  - 确保控制器之间的正确层级关系

### 🎯 表达式控制效果

- **旋转控制**：子级可以保持自身旋转角度不随父级变化
- **缩放控制**：子级可以保持自身缩放比例不随父级变化
- **不透明度控制**：父级不透明度和启用状态会影响所有子级

## 💡 使用方法

### 🎮 基础操作

1. 在 AE 中选择要控制的图层
2. 运行脚本
3. 选择要添加的控制属性（旋转/缩放/不透明度）
4. 根据需要选择是否添加总控制器或子控制器
5. 点击"开搞"按钮创建控制器

### 🔄 按钮功能

- **开搞按钮**

  - 左键点击：创建空对象并设置父子级关系
  - 右键点击：切换到"仅表达式"模式
- **取消按钮**

  - 左键点击：关闭面板
  - 右键点击：切换到"清除控制器"模式

### ⌨️ 快捷操作

- **标题栏**：按住 Ctrl 点击可检查更新
- **帮助按钮**：点击查看详细使用说明

### 🔍 版本检查

1. 按住 Ctrl 点击标题栏
2. 如有新版本，会显示更新提示
3. 可选择从 GitHub 或 Gitee 下载更新

### 🗑️ 清除控制器

1. 选择要清除控制器的图层
2. 右键点击"取消"按钮切换到清除模式
3. 点击"清除"按钮移除表达式和父子级关系

## 💡 使用技巧

- 使用总控制器实现整体动画，再用子控制器微调单个元素
- 利用表达式模式快速为现有控制器添加新的控制属性
- 合理使用清除功能，可以快速重新设置控制关系
- 注意保存文件，以免意外丢失动画设置

## ⚠️ 注意事项

- 添加控制器前请确保选择了正确的图层
- 使用清除功能时会保留当前的变换值
- 更新版本前建议保存当前工程文件
- 如遇问题可通过 Issues 反馈
