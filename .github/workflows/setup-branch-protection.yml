name: åˆ†æ”¯ä¿æŠ¤é…ç½®æŒ‡å—

# æ‰‹åŠ¨è§¦å‘ï¼Œæä¾›åˆ†æ”¯ä¿æŠ¤é…ç½®æŒ‡å¯¼
on:
  workflow_dispatch:
    inputs:
      show_guide:
        description: 'æ˜¾ç¤ºåˆ†æ”¯ä¿æŠ¤é…ç½®æŒ‡å—'
        required: false
        default: true
        type: boolean

permissions:
  contents: read

jobs:
  protection-guide:
    name: åˆ†æ”¯ä¿æŠ¤æŒ‡å—
    runs-on: ubuntu-latest

    steps:
      - name: è¾“å‡ºåˆ†æ”¯ä¿æŠ¤é…ç½®æŒ‡å—
        run: |
          echo "ğŸ”’ GitHubåˆ†æ”¯ä¿æŠ¤é…ç½®æŒ‡å—"
          echo "================================"
          echo ""
          echo "ç”±äºGitHub Actionsçš„æƒé™é™åˆ¶ï¼Œéœ€è¦æ‰‹åŠ¨é…ç½®åˆ†æ”¯ä¿æŠ¤è§„åˆ™ï¼š"
          echo ""
          echo "ğŸ“‹ æ‰‹åŠ¨é…ç½®æ­¥éª¤ï¼š"
          echo "1. è¿›å…¥ä»“åº“è®¾ç½®é¡µé¢ï¼š"
          echo "   https://github.com/${{ github.repository }}/settings"
          echo ""
          echo "2. ç‚¹å‡»å·¦ä¾§èœå•ä¸­çš„ 'Branches'"
          echo ""
          echo "3. ç‚¹å‡» 'Add rule' æŒ‰é’®"
          echo ""
          echo "4. é…ç½®devåˆ†æ”¯ä¿æŠ¤è§„åˆ™ï¼š"
          echo "   - Branch name pattern: dev"
          echo "   - âœ… Restrict pushes that create files"
          echo "   - âœ… Restrict pushes that create files (æ·»åŠ ä»“åº“æ‰€æœ‰è€…)"
          echo "   - âœ… Do not allow bypassing the above settings"
          echo ""
          echo "5. ç‚¹å‡» 'Create' ä¿å­˜è®¾ç½®"
          echo ""
          echo "ğŸ¯ é…ç½®ç›®æ ‡ï¼š"
          echo "- devåˆ†æ”¯: å—ä¿æŠ¤ï¼Œä»…å¼€å‘è€…å¯è®¿é—®"
          echo "- mainåˆ†æ”¯: å…¬å¼€ï¼Œç”¨äºç”Ÿäº§ç¯å¢ƒ"
          echo ""
          echo "âœ… é…ç½®å®Œæˆåï¼Œdevåˆ†æ”¯å°†å—åˆ°ä¿æŠ¤"
          echo "ğŸ”— ä»“åº“è®¾ç½®é“¾æ¥: https://github.com/${{ github.repository }}/settings/branches"

      - name: æ£€æŸ¥å½“å‰åˆ†æ”¯çŠ¶æ€
        run: |
          echo ""
          echo "ğŸ“Š å½“å‰ä»“åº“çŠ¶æ€ï¼š"
          echo "- é»˜è®¤åˆ†æ”¯: ${{ github.event.repository.default_branch }}"
          echo "- å½“å‰åˆ†æ”¯: ${{ github.ref_name }}"
          echo "- ä»“åº“æ‰€æœ‰è€…: ${{ github.repository_owner }}"
          echo ""
          echo "ğŸŒ¿ åˆ†æ”¯ç­–ç•¥ï¼š"
          echo "- main: ç”Ÿäº§åˆ†æ”¯ï¼ˆå…¬å¼€ï¼Œæ’é™¤assets/å’Œdev/æ–‡ä»¶å¤¹ï¼‰"
          echo "- dev: å¼€å‘åˆ†æ”¯ï¼ˆå—ä¿æŠ¤ï¼ŒåŒ…å«æ‰€æœ‰å¼€å‘æ–‡ä»¶ï¼‰"
